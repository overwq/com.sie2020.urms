{"version":3,"sources":["webpack:///./src/page/Login.vue?a24c","webpack:///./src/page/Login.vue?d3d3","webpack:///src/page/Login.vue","webpack:///./src/page/Login.vue?10b8","webpack:///./src/page/Login.vue","webpack:///./src/api/user.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","ref","staticClass","user","_v","required","message","trigger","type","model","value","callback","$$v","$set","expression","on","$event","submitForm","resetForm","staticRenderFns","data","userPassword","userLoginName","created","document","onkeypress","e","key","methods","$refs","formName","validate","valid","alert","resetFields","login","res","box","userMenus","length","forEach","permissions","sessionStorage","setItem","JSON","stringify","menu","setTimeout","removeItem","clear","router","component","http","post","getUsers","addUser","deleteUser","userId","updateUser","getUserById","getCount"],"mappings":"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","file":"js/chunk-2db3f28a.c7767c03.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=6c76cda5&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=6c76cda5&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"LoginPage\"}},[_c('el-form',{ref:\"user\",staticClass:\"demo-dynamic\",attrs:{\"model\":_vm.user,\"label-width\":\"100px\"}},[_c('el-button',{staticClass:\"info-btn\",attrs:{\"type\":\"info\",\"plain\":\"\"}},[_vm._v(\"用户权限管理系统\")]),_c('el-form-item',{attrs:{\"prop\":\"userLoginName\",\"label\":\"用户名\",\"rules\":[\n        { required: true, message: '请输入用户名', trigger: 'blur' },\n        { type: '', message: '请输入正确的用户名', trigger: ['blur', 'change'] }\n      ]}},[_c('el-input',{model:{value:(_vm.user.userLoginName),callback:function ($$v) {_vm.$set(_vm.user, \"userLoginName\", $$v)},expression:\"user.userLoginName\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"userPassword\",\"label\":\"密码\",\"rules\":[\n        { required: true, message: '密码', trigger: 'blur' },\n        { type: '', message: '密码不正确', trigger: ['blur', 'change'] }\n      ]}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.user.userPassword),callback:function ($$v) {_vm.$set(_vm.user, \"userPassword\", $$v)},expression:\"user.userPassword\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('user')}}},[_vm._v(\"提交\")]),_c('el-button',{on:{\"click\":function($event){return _vm.resetForm('user')}}},[_vm._v(\"重置\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"LoginPage\">\r\n    <el-form :model=\"user\" ref=\"user\" label-width=\"100px\" class=\"demo-dynamic\">\r\n      <el-button type=\"info\" plain class=\"info-btn\">用户权限管理系统</el-button>\r\n      <!-- <div></div> -->\r\n      <el-form-item\r\n        prop=\"userLoginName\"\r\n        label=\"用户名\"\r\n        :rules=\"[\r\n          { required: true, message: '请输入用户名', trigger: 'blur' },\r\n          { type: '', message: '请输入正确的用户名', trigger: ['blur', 'change'] }\r\n        ]\">\r\n        <el-input v-model=\"user.userLoginName\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item\r\n        prop=\"userPassword\"\r\n        label=\"密码\"\r\n        :rules=\"[\r\n          { required: true, message: '密码', trigger: 'blur' },\r\n          { type: '', message: '密码不正确', trigger: ['blur', 'change'] }\r\n        ]\">\r\n        <el-input type=\"password\" v-model=\"user.userPassword\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"submitForm('user')\" >提交</el-button>\r\n        <el-button @click=\"resetForm('user')\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { login } from '../api/user'\r\nimport router from '../router/index'\r\nexport default {\r\n  data () {\r\n    return {\r\n      user: {\r\n        userPassword: '',\r\n        userLoginName: ''\r\n      }\r\n    }\r\n  },\r\n  created: function () {\r\n    document.onkeypress = (e) => {\r\n      if (e.key === 'Enter') this.submitForm('user')\r\n    }\r\n  },\r\n  methods: {\r\n    submitForm (formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          this.login()\r\n        } else {\r\n          alert('user name or password is null or not correct!')\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    resetForm (formName) {\r\n      this.$refs[formName].resetFields()\r\n    },\r\n    login () {\r\n      login(this.user).then(res => {\r\n        if (res.data && res.data.box ){\r\n          const userMenus = res.data.box.menu\r\n          let permissions = []\r\n          if (userMenus && userMenus.length > 0) {\r\n            userMenus.forEach(t => {\r\n              permissions = [...permissions, t.menuUrl]\r\n            })\r\n          }\r\n          sessionStorage.setItem('user', JSON.stringify(res.data.box.user))\r\n          // sessionStorage.setItem('role', JSON.stringify(res.data.box.role))\r\n          sessionStorage.setItem('menu', JSON.stringify(res.data.box.menu))\r\n          sessionStorage.setItem('permissions', JSON.stringify(permissions))\r\n          setTimeout(() => {\r\n            sessionStorage.removeItem('user')\r\n            sessionStorage.removeItem('menu')\r\n            sessionStorage.removeItem('permissions')\r\n            sessionStorage.clear()\r\n            this.Message.error('session 已过期，请重新登陆！')\r\n            router.push('/login')\r\n          }, 1000 * 60 * 30)\r\n\r\n\r\n          router.push('/container/home')\r\n        }\r\n      })\r\n\r\n    }\r\n  }\r\n\r\n}\r\n</script>\r\n<style scoped >\r\n#LoginPage{\r\n  width: 500px;\r\n  height: 300px;\r\n  border: 1px solid #eee;\r\n  margin: 100px auto;\r\n  /* text-align: center; */\r\n}\r\n.info-btn{\r\n  width: 100%;\r\n  height: 60px;\r\n  font-size: 1.5em;\r\n  letter-spacing: 8px;\r\n  margin-bottom: 20px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=6c76cda5&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=6c76cda5&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6c76cda5\",\n  null\n  \n)\n\nexport default component.exports","import http from './http'\r\n\r\nconst login = (user) => http.post('/login', user)\r\n\r\nconst getUsers = (user) => http.post('/user/select/condition', user)\r\n\r\nconst addUser = (user) => http.post('/user/insert', user)\r\n\r\nconst deleteUser = (userId) => http.post('/user/delete', userId)\r\n\r\nconst updateUser = (user) => http.post('/user/update', user)\r\n\r\nconst getUserById = (userId) => http.post('/user/select/id', userId)\r\n\r\nconst getUserByName = (userName) => http.post('/user/select/name', userName)\r\n\r\nconst getUserMenu = (userLoginName) => http.post('/user/menu', userLoginName)\r\n\r\nconst getCount = (user) => http.post('/user/select/count', user)\r\n\r\nexport {\r\n  login, getUsers, addUser, deleteUser, updateUser, getUserById, getUserByName, getUserMenu, getCount\r\n}\r\n"],"sourceRoot":""}